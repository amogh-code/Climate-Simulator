<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Climate Simulator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            color: #333;
            margin: 0;
            padding: 0;
            transition: background-color 0.3s, color 0.3s;
        }
        .container {
            width: 80%;
            margin: 0 auto;
            padding: 20px;
        }
        .dark-mode {
            background-color: #2c2c2c;
            color: #e0e0e0;
        }
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
        }
        .slider-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .slider-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .graph-container {
            margin-top: 20px;
            border: 1px solid #ccc;
            padding: 10px;
            background-color: #fff;
            border-radius: 8px;
        }
        canvas {
            width: 100%;
            height: 300px;
        }
        button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div id="dateTime"></div>
            <button id="toggleButton" onclick="toggleDarkMode()">Toggle Dark Mode</button>
        </header>

        <h3 style="font-size: 12px; text-align: center;">|| Jai Guru Dev ||</h3>
        <h1 style="text-align: center;">Anweshna 2025</h1>
        <h3 style="text-align: center;">Done by Advaith, Hariprasad, and Amogh from Class 12 A SSRVM North Bangalore</h3>
        <h2 style="text-align: center;">Climate Simulator</h2>

        <form id="inputForm">
            <div class="slider-container">
                <label class="slider-label">Ocean Heat Absorption Coefficient (A_OCEAN): 
                    <input type="range" min="0" max="1" value="0.2" step="0.01" id="A_OCEAN" oninput="updateValue('A_OCEAN')">
                    <span id="A_OCEAN_value">0.20</span>
                </label>
                <label class="slider-label">Land Heat Absorption Coefficient (A_LAND): 
                    <input type="range" min="0" max="1" value="0.3" step="0.01" id="A_LAND" oninput="updateValue('A_LAND')">
                    <span id="A_LAND_value">0.30</span>
                </label>
                <label class="slider-label">Sea Ice Heat Absorption Coefficient (A_ICE): 
                    <input type="range" min="0" max="1" value="0.1" step="0.01" id="A_ICE" oninput="updateValue('A_ICE')">
                    <span id="A_ICE_value">0.10</span>
                </label>
                <label class="slider-label">Ice Melt Rate: 
                    <input type="range" min="0" max="0.1" value="0.05" step="0.001" id="ICE_MELT_RATE" oninput="updateValue('ICE_MELT_RATE')">
                    <span id="ICE_MELT_RATE_value">0.050</span>
                </label>
                <label class="slider-label">Time Steps (Years): 
                    <input type="range" min="10" max="200" value="100" id="TIME_STEPS" oninput="updateValue('TIME_STEPS')">
                    <span id="TIME_STEPS_value">100</span>
                </label>
                <label class="slider-label">Wind Magnitude (m/s): 
                    <input type="range" min="0" max="20" value="5" step="0.1" id="wind_magnitude" oninput="updateValue('wind_magnitude')">
                    <span id="wind_magnitude_value">5.0</span>
                </label>
                <label class="slider-label">Greenhouse Gases (normalized): 
                    <input type="range" min="0.5" max="2" value="1" step="0.01" id="greenhouse_gases" oninput="updateValue('greenhouse_gases')">
                    <span id="greenhouse_gases_value">1.00</span>
                </label>
            </div>
            <button type="submit">Generate Graphs</button>
        </form>

        <div class="graph-container">
            <canvas id="atmosphereTemp"></canvas>
        </div>
        <div class="graph-container">
            <canvas id="oceanTemp"></canvas>
        </div>
        <div class="graph-container">
            <canvas id="landTemp"></canvas>
        </div>
        <div class="graph-container">
            <canvas id="iceVolume"></canvas>
        </div>
    </div>

    <script>
        function updateDateTime() {
            const now = new Date();
            document.getElementById('dateTime').innerText = now.toLocaleString();
        }

        function updateValue(sliderId) {
            const sliderValue = document.getElementById(sliderId).value;
            document.getElementById(sliderId + '_value').innerText = parseFloat(sliderValue).toFixed(3);
        }

        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            const button = document.getElementById('toggleButton');
            button.innerText = document.body.classList.contains('dark-mode') ? 'Toggle Light Mode' : 'Toggle Dark Mode';
        }

        function generateGraphs(event) {
            event.preventDefault();

            const A_OCEAN = parseFloat(document.getElementById('A_OCEAN').value);
            const A_LAND = parseFloat(document.getElementById('A_LAND').value);
            const A_ICE = parseFloat(document.getElementById('A_ICE').value);
            const ICE_MELT_RATE = parseFloat(document.getElementById('ICE_MELT_RATE').value);
            const TIME_STEPS = parseInt(document.getElementById('TIME_STEPS').value);
            const wind_magnitude = parseFloat(document.getElementById('wind_magnitude').value);
            const greenhouse_gases = parseFloat(document.getElementById('greenhouse_gases').value);

            let atmosphere_temps = [];
            let ocean_temps = [];
            let land_temps = [];
            let sea_ice_volumes = [];

            let atmosphere_temp = 15;
            let ocean_temp = 10;
            let land_temp = 12;
            let sea_ice_volume = 100;

            const C_ATMOSPHERE = 1;
            const C_OCEAN = 10;
            const C_LAND = 5;

            for (let i = 0; i < TIME_STEPS; i++) {
                // Heat transfer calculations
                let heat_atmosphere_to_ocean = A_OCEAN * (atmosphere_temp - ocean_temp) / C_OCEAN;
                let heat_land_to_ocean = A_LAND * (land_temp - ocean_temp) / C_OCEAN;
                let heat_ocean_to_land = A_LAND * (ocean_temp - land_temp) / C_LAND;

                // Temperature updates
                atmosphere_temp += -heat_atmosphere_to_ocean * C_ATMOSPHERE + greenhouse_gases * 0.1;
                ocean_temp += heat_atmosphere_to_ocean + heat_land_to_ocean - A_ICE * sea_ice_volume / 1000;
                land_temp += heat_ocean_to_land + wind_magnitude * 0.01;

                // Sea ice volume update
                sea_ice_volume = Math.max(0, sea_ice_volume - ICE_MELT_RATE * (ocean_temp - 0));

                atmosphere_temps.push(atmosphere_temp);
                ocean_temps.push(ocean_temp);
                land_temps.push(land_temp);
                sea_ice_volumes.push(sea_ice_volume);
            }

            drawGraph('atmosphereTemp', atmosphere_temps, 'Atmospheric Temperature (°C)', 'red');
            drawGraph('oceanTemp', ocean_temps, 'Ocean Temperature (°C)', 'blue');
            drawGraph('landTemp', land_temps, 'Land Temperature (°C)', 'green');
            drawGraph('iceVolume', sea_ice_volumes, 'Sea Ice Volume (Million km³)', 'cyan');
        }

        function drawGraph(canvasId, data, label, color) {
            const canvas = document.getElementById(canvasId);
            const ctx = canvas.getContext('2d');
            
            // Set canvas size
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            
            const width = canvas.width;
            const height = canvas.height;
            const padding = 40;

            ctx.clearRect(0, 0, width, height);
            
            const minValue = Math.min(...data);
            const maxValue = Math.max(...data);
            const valueRange = maxValue - minValue;

            // Draw axes
            ctx.beginPath();
            ctx.moveTo(padding, padding);
            ctx.lineTo(padding, height - padding);
            ctx.lineTo(width - padding, height - padding);
            ctx.strokeStyle = 'black';
            ctx.stroke();

            // Draw graph
            ctx.beginPath();
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;

            const xStep = (width - 2 * padding) / (data.length - 1);
            const yScale = (height - 2 * padding) / valueRange;

            for (let i = 0; i < data.length; i++) {
                const x = padding + i * xStep;
                const y = height - padding - (data[i] - minValue) * yScale;
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }

            ctx.stroke();

            // Add labels
            ctx.fillStyle = 'black';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(label, width / 2, 20);
            ctx.fillText('Time (Years)', width / 2, height - 10);
            
            ctx.save();
            ctx.rotate(-Math.PI / 2);
            ctx.textAlign = 'center';
            ctx.fillText('Value', -height / 2, 15);
            ctx.restore();

            // Add scale
            ctx.textAlign = 'right';
            ctx.fillText(maxValue.toFixed(2), padding - 5, padding);
            ctx.fillText(minValue.toFixed(2), padding - 5, height - padding);
        }

        document.getElementById('inputForm').addEventListener('submit', generateGraphs);
        setInterval(updateDateTime, 1000);

        // Generate graphs on page load
        generateGraphs(new Event('submit'));
    </script>
</body>
</html>
