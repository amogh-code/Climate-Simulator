<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Climate Simulator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
            transition: background-color 0.3s, color 0.3s;
        }
        .dark-mode {
            background-color: #121212;
            color: #ffffff;
        }
        h1, h2, h3 {
            text-align: center;
        }
        #device-menu {
            display: flex;
            justify-content: flex-end;
            margin-bottom: 10px;
        }
        .menu-btn {
            padding: 10px;
            cursor: pointer;
            border: none;
            background-color: #007bff;
            color: white;
            border-radius: 5px;
        }
        .collapsible {
            display: none;
            flex-direction: column;
            position: absolute;
            right: 20px;
            z-index: 100;
            background-color: white;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        .collapsible .device-option {
            padding: 10px;
            cursor: pointer;
        }
        .collapsible .device-option:hover {
            background-color: #f0f0f0;
        }
        .form-container {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 8px;
            background-color: white;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        .form-slider {
            width: 100%;
        }
        .form-slider-label {
            display: inline-block;
            margin-bottom: 5px;
        }
        .graph-container {
            border: 1px solid #ccc;
            border-radius: 8px;
            padding: 10px;
            margin: 20px 0;
        }
        #darkModeToggle {
            position: absolute;
            top: 20px;
            right: 20px;
            cursor: pointer;
            background-color: #007bff;
            color: white;
            padding: 10px;
            border: none;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div id="device-menu">
        <button class="menu-btn" onclick="toggleMenu()">Device Options <i class="fas fa-cog"></i></button>
        <div class="collapsible" id="deviceOptions">
            <div class="device-option" onclick="setDevice('desktop')">Desktop</div>
            <div class="device-option" onclick="setDevice('mobile')">Mobile</div>
        </div>
    </div>
    
    <button id="darkModeToggle" onclick="toggleDarkMode()">Toggle Dark Mode</button>

    <h1>|| Jai Guru Dev ||</h1>
    <h2>Anweshna 2025</h2>
    <h3>Done by Advaith, Hariprasad, and Amogh from Class 12A SSRVM North Bangalore</h3>
    <h2>Climate Simulator</h2>
    <p>A tool to visualize the impact of various climate parameters over time.</p>

    <div class="form-container">
        <form id="inputForm">
            <label for="A_OCEAN" class="form-slider-label">Ocean Heat Absorption Coefficient (A_OCEAN):</label>
            <input type="range" class="form-slider" id="A_OCEAN" name="A_OCEAN" min="0" max="1" step="0.01" value="0.2" oninput="this.nextElementSibling.value = this.value">
            <output>0.2</output><br>

            <label for="A_LAND" class="form-slider-label">Land Heat Absorption Coefficient (A_LAND):</label>
            <input type="range" class="form-slider" id="A_LAND" name="A_LAND" min="0" max="1" step="0.01" value="0.3" oninput="this.nextElementSibling.value = this.value">
            <output>0.3</output><br>

            <label for="A_ICE" class="form-slider-label">Sea Ice Heat Absorption Coefficient (A_ICE):</label>
            <input type="range" class="form-slider" id="A_ICE" name="A_ICE" min="0" max="1" step="0.01" value="0.1" oninput="this.nextElementSibling.value = this.value">
            <output>0.1</output><br>

            <label for="ICE_MELT_RATE" class="form-slider-label">Ice Melt Rate:</label>
            <input type="range" class="form-slider" id="ICE_MELT_RATE" name="ICE_MELT_RATE" min="0" max="1" step="0.01" value="0.05" oninput="this.nextElementSibling.value = this.value">
            <output>0.05</output><br>

            <label for="TIME_STEPS" class="form-slider-label">Time Steps (Years):</label>
            <input type="range" class="form-slider" id="TIME_STEPS" name="TIME_STEPS" min="1" max="1000" value="100" oninput="this.nextElementSibling.value = this.value">
            <output>100</output><br>

            <label for="wind_magnitude" class="form-slider-label">Wind Magnitude (m/s):</label>
            <input type="range" class="form-slider" id="wind_magnitude" name="wind_magnitude" min="0" max="20" step="0.1" value="5" oninput="this.nextElementSibling.value = this.value">
            <output>5</output><br>

            <label for="greenhouse_gases" class="form-slider-label">Greenhouse Gases (normalized):</label>
            <input type="range" class="form-slider" id="greenhouse_gases" name="greenhouse_gases" min="0" max="10" step="0.01" value="1" oninput="this.nextElementSibling.value = this.value">
            <output>1</output><br>

            <button type="button" onclick="generateGraphs()">Generate Graphs</button>
        </form>
    </div>

    <h2>Graphs</h2>
    <div class="graph-container" id="atmosphereTemp"></div>
    <p>Atmosphere Temperature represents the heat content of the atmosphere, affected by various factors including greenhouse gases.</p>
    <div class="graph-container" id="oceanTemp"></div>
    <p>Ocean Temperature indicates the heat absorbed by the oceans, which plays a significant role in climate dynamics.</p>
    <div class="graph-container" id="landTemp"></div>
    <p>Land Temperature shows the heat content of land masses and is influenced by solar radiation and heat absorption coefficients.</p>
    <div class="graph-container" id="iceVolume"></div>
    <p>Sea Ice Volume indicates the amount of ice in the oceans, which is critical for understanding climate change.</p>

    <script>
        function toggleMenu() {
            const menu = document.getElementById('deviceOptions');
            menu.style.display = menu.style.display === 'flex' ? 'none' : 'flex';
        }

        function setDevice(device) {
            alert(`You selected ${device} mode. Adjusting styles accordingly.`);
            const isMobile = device === 'mobile';
            if (isMobile) {
                document.body.style.fontSize = '14px';
            } else {
                document.body.style.fontSize = '16px';
            }
            toggleMenu();
        }

        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            const graphs = document.querySelectorAll('.graph-container');
            graphs.forEach(graph => {
                graph.style.backgroundColor = document.body.classList.contains('dark-mode') ? '#1e1e1e' : '#ffffff';
                graph.style.color = document.body.classList.contains('dark-mode') ? '#ffffff' : '#000000';
            });
        }

        function generateGraphs() {
            const A_OCEAN = parseFloat(document.getElementById('A_OCEAN').value);
            const A_LAND = parseFloat(document.getElementById('A_LAND').value);
            const A_ICE = parseFloat(document.getElementById('A_ICE').value);
            const ICE_MELT_RATE = parseFloat(document.getElementById('ICE_MELT_RATE').value);
            const TIME_STEPS = parseInt(document.getElementById('TIME_STEPS').value);
            const wind_magnitude = parseFloat(document.getElementById('wind_magnitude').value);
            const greenhouse_gases = parseFloat(document.getElementById('greenhouse_gases').value);

            let atmosphereTemp = [];
            let oceanTemp = [];
            let landTemp = [];
            let iceVolume = [];

            // Simulation logic for each year
            for (let year = 0; year < TIME_STEPS; year++) {
                atmosphereTemp.push(A_OCEAN * greenhouse_gases * year * 0.5 + 15); // Base temperature + linear increase
                oceanTemp.push(A_LAND * year * 0.3 + 15); // Ocean temp affected by land heat absorption
                landTemp.push(A_ICE * year * 0.2 + 20); // Land temp increase based on ice absorption
                iceVolume.push(Math.max(0, 100 - ICE_MELT_RATE * year)); // Decreasing ice volume
            }

            const traces = [
                {
                    x: Array.from({ length: TIME_STEPS }, (_, i) => i + 1),
                    y: atmosphereTemp,
                    mode: 'lines+markers',
                    name: 'Atmosphere Temperature',
                    line: { color: '#ff5733' }
                },
                {
                    x: Array.from({ length: TIME_STEPS }, (_, i) => i + 1),
                    y: oceanTemp,
                    mode: 'lines+markers',
                    name: 'Ocean Temperature',
                    line: { color: '#33c1ff' }
                },
                {
                    x: Array.from({ length: TIME_STEPS }, (_, i) => i + 1),
                    y: landTemp,
                    mode: 'lines+markers',
                    name: 'Land Temperature',
                    line: { color: '#ff33c1' }
                },
                {
                    x: Array.from({ length: TIME_STEPS }, (_, i) => i + 1),
                    y: iceVolume,
                    mode: 'lines+markers',
                    name: 'Ice Volume',
                    line: { color: '#33ff57' }
                }
            ];

            const layout = {
                title: 'Climate Simulation Results',
                xaxis: {
                    title: 'Years',
                },
                yaxis: {
                    title: 'Temperature / Volume',
                    range: [0, 120], // Adjust range as necessary
                },
                showlegend: true,
                plot_bgcolor: document.body.classList.contains('dark-mode') ? '#1e1e1e' : '#ffffff',
                paper_bgcolor: document.body.classList.contains('dark-mode') ? '#1e1e1e' : '#ffffff',
                font: {
                    color: document.body.classList.contains('dark-mode') ? '#ffffff' : '#000000',
                }
            };

            Plotly.newPlot('atmosphereTemp', [traces[0]], layout);
            Plotly.newPlot('oceanTemp', [traces[1]], layout);
            Plotly.newPlot('landTemp', [traces[2]], layout);
            Plotly.newPlot('iceVolume', [traces[3]], layout);
        }
    </script>
</body>
</html>
