<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Climate Simulator</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f8ff; /* Light background color */
            margin: 0;
            padding: 20px;
            border: 5px solid #4CAF50; /* Green border around the body */
            border-radius: 10px;
            transition: background-color 0.3s, color 0.3s; /* Smooth transition for dark/light mode */
        }

        h1 {
            color: #333; /* Dark text color */
        }

        .graph-container {
            border: 2px solid #008CBA; /* Blue border for graph containers */
            border-radius: 10px;
            padding: 10px;
            margin: 20px 0;
            background-color: rgba(255, 255, 255, 0.8); /* White background with transparency */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s; /* Animation for graph containers */
        }

        .graph-container:hover {
            transform: scale(1.02); /* Slight zoom effect on hover */
        }

        label {
            font-weight: bold;
            margin: 10px 0;
            display: block;
            color: #555; /* Darker label color */
        }

        input[type="range"], input[type="number"] {
            width: 100%;
            margin: 10px 0;
        }

        .settings {
            background-color: #e0f7fa; /* Light cyan background for settings */
            border: 2px solid #00695c; /* Darker teal border */
            border-radius: 10px;
            padding: 15px;
            transition: background-color 0.3s; /* Transition for settings box */
        }

        .toggle-button {
            margin: 10px;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.3s; /* Animation for toggle buttons */
        }

        .toggle-button:hover {
            transform: scale(1.05); /* Slight zoom effect on hover */
        }

        .dark-mode {
            background-color: #333; /* Dark background for dark mode */
            color: white; /* Light text color */
        }

        .dark-mode .settings {
            background-color: #444; /* Darker background for settings in dark mode */
            border: 2px solid #555; /* Lighter border */
        }
    </style>
</head>
<body>
    <h1>Climate Simulator</h1>
    <div class="settings" id="settingsBox">
        <label for="A_OCEAN">Area of Ocean (in million km²):</label>
        <input type="number" id="A_OCEAN" value="361" step="1">
        
        <label for="A_LAND">Area of Land (in million km²):</label>
        <input type="number" id="A_LAND" value="149" step="1">
        
        <label for="A_ICE">Area of Ice (in million km²):</label>
        <input type="number" id="A_ICE" value="16" step="1">
        
        <label for="ICE_MELT_RATE">Ice Melt Rate (in million km³/year):</label>
        <input type="number" id="ICE_MELT_RATE" value="100" step="1">
        
        <label for="TIME_STEPS">Time Steps (years):</label>
        <input type="number" id="TIME_STEPS" value="100" step="1">
        
        <label for="wind_magnitude">Wind Magnitude (0-10):</label>
        <input type="range" id="wind_magnitude" min="0" max="10" value="5">
        
        <label for="greenhouse_gases">Greenhouse Gases (0-10):</label>
        <input type="range" id="greenhouse_gases" min="0" max="10" value="5">
        
        <button class="toggle-button" id="toggleButton">Toggle Dark/Light Mode</button>
    </div>

    <div class="graph-container" id="atmosphereTemp"></div>
    <div class="graph-container" id="oceanTemp"></div>
    <div class="graph-container" id="landTemp"></div>
    <div class="graph-container" id="iceVolume"></div>

    <div id="dateTime" style="text-align:center; font-weight:bold; color:#333;"></div>

    <script>
        // Function to update the date and time display
        function updateDateTime() {
            const now = new Date();
            const dateTimeDisplay = now.toLocaleString();
            document.getElementById('dateTime').innerText = dateTimeDisplay;
        }

        // Function to toggle dark and light mode
        document.getElementById('toggleButton').addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
        });

        // Function to update layout based on screen size
        function updateLayout() {
            if (window.innerWidth < 768) {
                document.body.style.fontSize = '14px'; // Smaller font size for mobile
                // Adjust graph sizes for mobile
                document.querySelectorAll('.graph-container').forEach(container => {
                    container.style.width = '90%';
                    container.style.margin = '0 auto';
                });
            } else {
                document.body.style.fontSize = '16px'; // Larger font size for desktop
                // Adjust graph sizes for desktop
                document.querySelectorAll('.graph-container').forEach(container => {
                    container.style.width = '80%';
                    container.style.margin = '20px auto';
                });
            }
        }

        // Main function to generate graphs based on user input
        function generateGraphs(event) {
            event.preventDefault(); // Prevent form submission

            // Retrieve user input values
            const A_OCEAN = parseFloat(document.getElementById('A_OCEAN').value);
            const A_LAND = parseFloat(document.getElementById('A_LAND').value);
            const A_ICE = parseFloat(document.getElementById('A_ICE').value);
            const ICE_MELT_RATE = parseFloat(document.getElementById('ICE_MELT_RATE').value);
            const TIME_STEPS = parseInt(document.getElementById('TIME_STEPS').value);
            const wind_magnitude = parseFloat(document.getElementById('wind_magnitude').value);
            const greenhouse_gases = parseFloat(document.getElementById('greenhouse_gases').value);

            // Initialize arrays for graph data
            let atmosphere_temps = [];
            let ocean_temps = [];
            let land_temps = [];
            let sea_ice_volumes = [];

            // Base temperature and volume values
            let baseAtmosphereTemp = 14; // Initial average atmosphere temperature
            let baseOceanTemp = 15; // Initial average ocean temperature
            let baseLandTemp = 15; // Initial average land temperature
            let baseIceVolume = 5000; // Initial sea ice volume in million km³

            // Calculate temperature and ice volume changes over time
            for (let i = 0; i < TIME_STEPS; i++) {
                let timeFactor = i / 100; // Scales time effect

                // Update temperatures and ice volume based on the model
                let atmosphereTemp = baseAtmosphereTemp + (A_OCEAN * timeFactor) + (greenhouse_gases * 0.5);
                let oceanTemp = baseOceanTemp + (A_OCEAN * timeFactor) + (wind_magnitude * 0.1);
                let landTemp = baseLandTemp + (A_LAND * timeFactor) + (wind_magnitude * 0.2);
                let seaIceVolume = baseIceVolume - (ICE_MELT_RATE * timeFactor) - (A_ICE * timeFactor * 10);

                // Ensure values don't drop below zero
                seaIceVolume = Math.max(seaIceVolume, 0);

                // Push calculated values into their respective arrays
                atmosphere_temps.push(atmosphereTemp);
                ocean_temps.push(oceanTemp);
                land_temps.push(landTemp);
                sea_ice_volumes.push(seaIceVolume);
            }

            // Plot the graphs using Plotly
            Plotly.newPlot('atmosphereTemp', [{
                x: Array.from({ length: TIME_STEPS }, (_, i) => i + 1),
                y: atmosphere_temps,
                type: 'scatter',
                name: 'Atmospheric Temperature',
                line: { color: 'orange' }
            }], {
                title: 'Atmospheric Temperature Over Time',
                xaxis: { title: 'Time (Years)' },
                yaxis: { title: 'Temperature (°C)' }
            });

            Plotly.newPlot('oceanTemp', [{
                x: Array.from({ length: TIME_STEPS }, (_, i) => i + 1),
                y: ocean_temps,
                type: 'scatter',
                name: 'Ocean Temperature',
                line: { color: 'blue' }
            }], {
                title: 'Ocean Temperature Over Time',
                xaxis: { title: 'Time (Years)' },
                yaxis: { title: 'Temperature (°C)' }
            });

            Plotly.newPlot('landTemp', [{
                x: Array.from({ length: TIME_STEPS }, (_, i) => i + 1),
                y: land_temps,
                type: 'scatter',
                name: 'Land Temperature',
                line: { color: 'green' }
            }], {
                title: 'Land Temperature Over Time',
                xaxis: { title: 'Time (Years)' },
                yaxis: { title: 'Temperature (°C)' }
            });

            Plotly.newPlot('iceVolume', [{
                x: Array.from({ length: TIME_STEPS }, (_, i) => i + 1),
                y: sea_ice_volumes,
                type: 'scatter',
                name: 'Sea Ice Volume',
                line: { color: 'cyan' }
            }], {
                title: 'Sea Ice Volume Over Time',
                xaxis: { title: 'Time (Years)' },
                yaxis: { title: 'Volume (million km³)' }
            });
        }

        // Event listener for input changes
        document.querySelectorAll('input').forEach(input => {
            input.addEventListener('input', generateGraphs);
        });

        // Initial graph generation
        generateGraphs(new Event('input')); // Trigger an initial update

        // Update date and time every second
        setInterval(updateDateTime, 1000);

        // Update layout on window resize
        window.addEventListener('resize', updateLayout);
        updateLayout(); // Initial layout setup
    </script>
</body>
</html>
