<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Climate Simulator</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            transition: background-color 0.5s, color 0.5s;
            background-color: #ffffff;
            color: #000000;
            margin: 0;
            padding: 0;
        }

        .dark-mode {
            background-color: #121212;
            color: #ffffff;
        }

        h1, h2 {
            text-align: center;
        }

        #menu {
            margin: 20px;
            text-align: center;
        }

        #settings {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 10;
        }

        .collapsible {
            background-color: #007BFF;
            color: white;
            cursor: pointer;
            padding: 10px;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 15px;
            border-radius: 5px;
        }

        .active, .collapsible:hover {
            background-color: #0056b3;
        }

        .content {
            padding: 0 18px;
            display: none;
            overflow: hidden;
            background-color: #f1f1f1;
            margin-top: 5px;
            border-radius: 5px;
        }

        label {
            display: inline-block;
            width: 300px;
            margin-bottom: 10px;
        }

        input[type=number], input[type=range] {
            margin-bottom: 10px;
            width: 100%;
        }

        .graph-container {
            width: 90%;
            margin: 0 auto;
        }

        footer {
            text-align: center;
            padding: 20px;
            margin-top: 20px;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div id="settings">
        <button class="collapsible">Settings</button>
        <div class="content">
            <label for="darkModeToggle">Dark Mode</label>
            <input type="checkbox" id="darkModeToggle">
            <label for="deviceSelect">Select Device:</label>
            <select id="deviceSelect">
                <option value="desktop">Desktop</option>
                <option value="mobile">Mobile</option>
            </select>
        </div>
    </div>

    <h1>|| Jai Guru Dev ||</h1>
    <h2>Anweshna 2025</h2>
    <p style="text-align:center;">Done by Advaith, Hariprasad, and Amogh from Class 12 A, SSRVM North Bangalore</p>
    <h2>Climate Simulator</h2>
    <div id="menu">
        <label for="A_OCEAN">Ocean Heat Absorption Coefficient (A_OCEAN):</label>
        <input type="range" id="A_OCEAN" name="A_OCEAN" min="0" max="1" value="0.2" step="0.01">
        <span id="A_OCEAN_value">0.20</span>
        <br>

        <label for="A_LAND">Land Heat Absorption Coefficient (A_LAND):</label>
        <input type="range" id="A_LAND" name="A_LAND" min="0" max="1" value="0.3" step="0.01">
        <span id="A_LAND_value">0.30</span>
        <br>

        <label for="A_ICE">Sea Ice Heat Absorption Coefficient (A_ICE):</label>
        <input type="range" id="A_ICE" name="A_ICE" min="0" max="1" value="0.1" step="0.01">
        <span id="A_ICE_value">0.10</span>
        <br>

        <label for="ICE_MELT_RATE">Ice Melt Rate:</label>
        <input type="range" id="ICE_MELT_RATE" name="ICE_MELT_RATE" min="0" max="1" value="0.05" step="0.01">
        <span id="ICE_MELT_RATE_value">0.05</span>
        <br>

        <label for="TIME_STEPS">Time Steps (Years):</label>
        <input type="number" id="TIME_STEPS" name="TIME_STEPS" value="100" required>
        <br>

        <label for="wind_magnitude">Wind Magnitude (m/s):</label>
        <input type="range" id="wind_magnitude" name="wind_magnitude" min="0" max="20" value="5" required>
        <span id="wind_magnitude_value">5.00</span>
        <br>

        <label for="greenhouse_gases">Greenhouse Gases (normalized):</label>
        <input type="range" id="greenhouse_gases" name="greenhouse_gases" min="0" max="5" value="1" step="0.01">
        <span id="greenhouse_gases_value">1.00</span>
        <br>

        <button id="generateButton">Generate Graphs</button>
    </div>

    <h2>Graphs</h2>
    <div class="graph-container">
        <div id="atmosphereTemp"></div>
        <p>Atmosphere Temperature Over Time: The graph shows the temperature change in the atmosphere due to various heat absorption coefficients and wind effects.</p>
        <p><strong>Formula:</strong> \( T_{atmosphere} = T_{initial} + \text{change due to wind and other factors} \)</p>

        <div id="oceanTemp"></div>
        <p>Ocean Temperature Over Time: Displays how ocean temperatures rise due to heat transfer from the atmosphere and land.</p>
        <p><strong>Formula:</strong> \( T_{ocean} = T_{initial} + \text{heat from atmosphere and land} \)</p>

        <div id="landTemp"></div>
        <p>Land Temperature Over Time: Represents the land temperature changes influenced by ocean heat and other environmental factors.</p>
        <p><strong>Formula:</strong> \( T_{land} = T_{initial} + \text{heat from ocean} \)</p>

        <div id="iceVolume"></div>
        <p>Sea Ice Volume Over Time: Illustrates how sea ice volume decreases due to rising ocean temperatures.</p>
        <p><strong>Formula:</strong> \( V_{ice} = V_{initial} - \text{melted ice volume} \)</p>
    </div>

    <footer>
        <p>Climate Simulator Â© 2025</p>
        <p id="dateTime"></p>
    </footer>

    <script>
        // Dark mode toggle
        document.getElementById('darkModeToggle').addEventListener('change', function() {
            document.body.classList.toggle('dark-mode');
            updateGraphColors();
        });

        // Update the graph colors
        function updateGraphColors() {
            const isDarkMode = document.body.classList.contains('dark-mode');
            const graphBackgroundColor = isDarkMode ? '#121212' : '#ffffff';
            const textColor = isDarkMode ? '#ffffff' : '#000000';
            
            Plotly.restyle('atmosphereTemp', {
                'marker.color': textColor
            });
            Plotly.restyle('oceanTemp', {
                'marker.color': textColor
            });
            Plotly.restyle('landTemp', {
                'marker.color': textColor
            });
            Plotly.restyle('iceVolume', {
                'marker.color': textColor
            });
        }

        // Collapsible settings box
        var coll = document.getElementsByClassName("collapsible");
        for (var i = 0; i < coll.length; i++) {
            coll[i].addEventListener("click", function() {
                this.classList.toggle("active");
                var content = this.nextElementSibling;
                if (content.style.display === "block") {
                    content.style.display = "none";
                } else {
                    content.style.display = "block";
                }
            });
        }

        // Update the slider values
        function updateSliderValue(sliderId, valueId) {
            const slider = document.getElementById(sliderId);
            const valueDisplay = document.getElementById(valueId);
            valueDisplay.textContent = slider.value;
        }

        // Attach input event listeners to sliders
        document.querySelectorAll('input[type=range]').forEach(slider => {
            slider.addEventListener('input', () => {
                updateSliderValue(slider.id, slider.id + '_value');
            });
        });

        // Graph generation logic
        document.getElementById('generateButton').addEventListener('click', function() {
            const A_OCEAN = parseFloat(document.getElementById('A_OCEAN').value);
            const A_LAND = parseFloat(document.getElementById('A_LAND').value);
            const A_ICE = parseFloat(document.getElementById('A_ICE').value);
            const ICE_MELT_RATE = parseFloat(document.getElementById('ICE_MELT_RATE').value);
            const TIME_STEPS = parseInt(document.getElementById('TIME_STEPS').value);
            const wind_magnitude = parseFloat(document.getElementById('wind_magnitude').value);
            const greenhouse_gases = parseFloat(document.getElementById('greenhouse_gases').value);

            const time = Array.from({length: TIME_STEPS}, (_, i) => i);
            const atmosphereTemp = time.map(t => A_OCEAN * t + wind_magnitude * Math.random());
            const oceanTemp = time.map(t => A_LAND * t + greenhouse_gases * Math.random());
            const landTemp = time.map(t => A_ICE * t + ICE_MELT_RATE * Math.random());
            const iceVolume = time.map(t => 1 - (ICE_MELT_RATE * t / 100));

            Plotly.newPlot('atmosphereTemp', [{
                x: time,
                y: atmosphereTemp,
                type: 'scatter',
                mode: 'lines+markers',
                name: 'Atmosphere Temperature'
            }]);

            Plotly.newPlot('oceanTemp', [{
                x: time,
                y: oceanTemp,
                type: 'scatter',
                mode: 'lines+markers',
                name: 'Ocean Temperature'
            }]);

            Plotly.newPlot('landTemp', [{
                x: time,
                y: landTemp,
                type: 'scatter',
                mode: 'lines+markers',
                name: 'Land Temperature'
            }]);

            Plotly.newPlot('iceVolume', [{
                x: time,
                y: iceVolume,
                type: 'scatter',
                mode: 'lines+markers',
                name: 'Sea Ice Volume'
            }]);

            updateGraphColors(); // Update colors based on the dark mode
        });

        // Update the date and time
        function updateDateTime() {
            const now = new Date();
            const dateTimeString = now.toLocaleString();
            document.getElementById("dateTime").innerText = dateTimeString;
        }

        // Update the date and time every second
        setInterval(updateDateTime, 1000);
        updateDateTime(); // Initial call
    </script>
</body>
</html>
