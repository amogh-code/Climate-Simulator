<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Climate Simulator - Anweshna 2025</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            transition: background-color 0.5s, color 0.5s;
            background-color: white;
            color: black;
        }
        .container {
            padding: 20px;
        }
        .header {
            text-align: center;
            margin-bottom: 20px;
            border-bottom: 2px solid gray;
        }
        .dark-mode {
            background-color: #121212;
            color: #ffffff;
        }
        #date-time {
            position: absolute;
            top: 10px;
            left: 20px;
            font-size: 14px;
        }
        #dark-mode-toggle {
            position: absolute;
            top: 10px;
            right: 20px;
            padding: 10px;
            background-color: #f0f0f0;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        #dark-mode-toggle:hover {
            background-color: #ccc;
        }
        h1, h2 {
            font-family: 'Georgia', serif;
            font-weight: normal;
            text-transform: uppercase;
        }
        #inputs {
            margin-bottom: 20px;
            padding: 15px;
            border: 2px solid #4CAF50;
            border-radius: 10px;
            background-color: #f9f9f9;
            transition: background-color 0.5s, border-color 0.5s;
        }
        .dark-mode #inputs {
            background-color: #1e1e1e;
            border-color: #4CAF50;
        }
        #inputs label {
            display: inline-block;
            width: 220px;
        }
        .slider-wrapper {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        .slider-value {
            margin-left: 10px;
            width: 50px;
        }
        #graphs {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        .graph-container {
            border: 2px solid #999;
            padding: 15px;
            background-color: #f2f2f2;
            border-radius: 10px;
            transition: background-color 0.5s, border-color 0.5s;
        }
        .dark-mode .graph-container {
            background-color: #1e1e1e;
            border-color: #666;
        }
        .description {
            font-size: 14px;
            margin-top: 10px;
        }
        #description-container {
            margin-top: 30px;
            padding: 10px;
            transition: background-color 0.5s;
        }
        .dark-mode #description-container {
            background-color: #2c2c2c;
        }
        .sliders {
            width: 200px;
        }
        .generate-btn {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 16px;
        }
        .generate-btn:hover {
            background-color: #45a049;
        }

        /* Mobile responsive styles */
        @media (max-width: 768px) {
            .slider-wrapper {
                flex-direction: column;
                align-items: flex-start;
            }
            #inputs label {
                width: 100%;
                margin-bottom: 5px;
            }
            #inputs {
                padding: 10px;
            }
            .generate-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div id="date-time"></div>
    <button id="dark-mode-toggle">Toggle Dark Mode</button>
    <div class="container">
        <div class="header">
            <small>|| Jai Guru Dev ||</small>
            <h1>Anweshna 2025</h1>
            <h2>Climate Simulator</h2>
            <p>Done by Advaith, Hariprasad, and Amogh from Class 12A, SSRVM North Bangalore</p>
        </div>

        <!-- Sliders with displayed values -->
        <div id="inputs">
            <h3>Simulation Parameters</h3>
            
            <div class="slider-wrapper">
                <label for="A_OCEAN">Ocean Heat Absorption Coefficient:</label>
                <input type="range" id="A_OCEAN" name="A_OCEAN" min="0.1" max="0.5" value="0.2" step="0.01" class="sliders" oninput="updateSliderValue('A_OCEAN')">
                <span class="slider-value" id="A_OCEAN_value">0.2</span>
            </div>

            <div class="slider-wrapper">
                <label for="A_LAND">Land Heat Absorption Coefficient:</label>
                <input type="range" id="A_LAND" name="A_LAND" min="0.1" max="0.5" value="0.3" step="0.01" class="sliders" oninput="updateSliderValue('A_LAND')">
                <span class="slider-value" id="A_LAND_value">0.3</span>
            </div>

            <div class="slider-wrapper">
                <label for="A_ICE">Sea Ice Heat Absorption Coefficient:</label>
                <input type="range" id="A_ICE" name="A_ICE" min="0.05" max="0.2" value="0.1" step="0.01" class="sliders" oninput="updateSliderValue('A_ICE')">
                <span class="slider-value" id="A_ICE_value">0.1</span>
            </div>

            <div class="slider-wrapper">
                <label for="ICE_MELT_RATE">Ice Melt Rate:</label>
                <input type="range" id="ICE_MELT_RATE" name="ICE_MELT_RATE" min="0.01" max="0.1" value="0.05" step="0.01" class="sliders" oninput="updateSliderValue('ICE_MELT_RATE')">
                <span class="slider-value" id="ICE_MELT_RATE_value">0.05</span>
            </div>

            <div class="slider-wrapper">
                <label for="TIME_STEPS">Time Steps (Years):</label>
                <input type="range" id="TIME_STEPS" name="TIME_STEPS" min="50" max="200" value="100" class="sliders" oninput="updateSliderValue('TIME_STEPS')">
                <span class="slider-value" id="TIME_STEPS_value">100</span>
            </div>

            <div class="slider-wrapper">
                <label for="wind_magnitude">Wind Magnitude (m/s):</label>
                <input type="range" id="wind_magnitude" name="wind_magnitude" min="1" max="10" value="5" class="sliders" oninput="updateSliderValue('wind_magnitude')">
                <span class="slider-value" id="wind_magnitude_value">5</span>
            </div>

            <div class="slider-wrapper">
                <label for="greenhouse_gases">Greenhouse Gases (Normalized):</label>
                <input type="range" id="greenhouse_gases" name="greenhouse_gases" min="0.5" max="2" value="1" step="0.01" class="sliders" oninput="updateSliderValue('greenhouse_gases')">
                <span class="slider-value" id="greenhouse_gases_value">1</span>
            </div>

            <!-- Button to generate the graphs -->
            <button class="generate-btn" onclick="generateGraphs()">Generate Graphs</button>
        </div>

        <!-- Graphs -->
        <div id="graphs">
            <div class="graph-container">
                <div id="atmosphereTemp"></div>
                <p class="description">This graph shows how the atmospheric temperature changes based on wind, greenhouse gases, and energy absorption.</p>
            </div>
            <div class="graph-container">
                <div id="oceanTemp"></div>
                <p class="description">Ocean temperatures rise and fall depending on heat absorption from both the atmosphere and land surfaces.</p>
            </div>
            <div class="graph-container">
                <div id="landTemp"></div>
                <p class="description">Land temperature is influenced by both ocean heat and greenhouse gas levels in the atmosphere.</p>
            </div>
            <div class="graph-container">
                <div id="iceVolume"></div>
                <p class="description">The graph shows the decrease in sea ice volume over the years due to rising temperatures.</p>
            </div>
        </div>

        <div id="description-container">
            <h3>Parameter Descriptions:</h3>
            <p>A_OCEAN: Coefficient for heat absorption by oceans (0.1 - 0.5)</p>
            <p>A_LAND: Coefficient for heat absorption by land (0.1 - 0.5)</p>
            <p>A_ICE: Coefficient for heat absorption by sea ice (0.05 - 0.2)</p>
            <p>ICE_MELT_RATE: Rate of ice melting per year (0.01 - 0.1)</p>
            <p>TIME_STEPS: Number of years to simulate (50 - 200)</p>
            <p>Wind Magnitude: Speed of wind (1 - 10 m/s)</p>
            <p>Greenhouse Gases: Level of greenhouse gases normalized (0.5 - 2)</p>
        </div>

        <script>
            // Function to update the displayed value of the slider
            function updateSliderValue(sliderId) {
                const slider = document.getElementById(sliderId);
                const valueDisplay = document.getElementById(sliderId + '_value');
                valueDisplay.textContent = slider.value;
            }

            // Function to generate the graphs based on slider values
            function generateGraphs() {
                const A_OCEAN = parseFloat(document.getElementById('A_OCEAN').value);
                const A_LAND = parseFloat(document.getElementById('A_LAND').value);
                const A_ICE = parseFloat(document.getElementById('A_ICE').value);
                const ICE_MELT_RATE = parseFloat(document.getElementById('ICE_MELT_RATE').value);
                const TIME_STEPS = parseInt(document.getElementById('TIME_STEPS').value);
                const wind_magnitude = parseFloat(document.getElementById('wind_magnitude').value);
                const greenhouse_gases = parseFloat(document.getElementById('greenhouse_gases').value);

                // Data generation
                const years = Array.from({length: TIME_STEPS}, (v, i) => i + 1);
                const atmosphericTemps = years.map(year => 
                    15 + (A_OCEAN * Math.sin(year / 10) + greenhouse_gases * 2)
                );
                const oceanTemps = years.map(year => 
                    20 + (A_LAND * Math.cos(year / 10) + wind_magnitude)
                );
                const landTemps = years.map(year => 
                    25 + (A_ICE * ICE_MELT_RATE * year)
                );
                const iceVolume = years.map(year => 
                    Math.max(0, 100 - year * ICE_MELT_RATE * 20)
                );

                // Plot atmospheric temperature
                Plotly.newPlot('atmosphereTemp', [{
                    x: years,
                    y: atmosphericTemps,
                    type: 'scatter',
                    mode: 'lines+markers',
                    marker: {color: 'blue'},
                    line: {shape: 'spline'}
                }], {
                    title: 'Atmospheric Temperature Over Time',
                    xaxis: {title: 'Years'},
                    yaxis: {title: 'Temperature (°C)'},
                    plot_bgcolor: 'rgba(255, 255, 255, 0.8)',
                    paper_bgcolor: 'rgba(255, 255, 255, 0.8)'
                });

                // Plot ocean temperature
                Plotly.newPlot('oceanTemp', [{
                    x: years,
                    y: oceanTemps,
                    type: 'scatter',
                    mode: 'lines+markers',
                    marker: {color: 'green'},
                    line: {shape: 'spline'}
                }], {
                    title: 'Ocean Temperature Over Time',
                    xaxis: {title: 'Years'},
                    yaxis: {title: 'Temperature (°C)'},
                    plot_bgcolor: 'rgba(255, 255, 255, 0.8)',
                    paper_bgcolor: 'rgba(255, 255, 255, 0.8)'
                });

                // Plot land temperature
                Plotly.newPlot('landTemp', [{
                    x: years,
                    y: landTemps,
                    type: 'scatter',
                    mode: 'lines+markers',
                    marker: {color: 'orange'},
                    line: {shape: 'spline'}
                }], {
                    title: 'Land Temperature Over Time',
                    xaxis: {title: 'Years'},
                    yaxis: {title: 'Temperature (°C)'},
                    plot_bgcolor: 'rgba(255, 255, 255, 0.8)',
                    paper_bgcolor: 'rgba(255, 255, 255, 0.8)'
                });

                // Plot ice volume
                Plotly.newPlot('iceVolume', [{
                    x: years,
                    y: iceVolume,
                    type: 'scatter',
                    mode: 'lines+markers',
                    marker: {color: 'red'},
                    line: {shape: 'spline'}
                }], {
                    title: 'Sea Ice Volume Over Time',
                    xaxis: {title: 'Years'},
                    yaxis: {title: 'Ice Volume (%)'},
                    plot_bgcolor: 'rgba(255, 255, 255, 0.8)',
                    paper_bgcolor: 'rgba(255, 255, 255, 0.8)'
                });
            }

            // Dark mode toggle
            const darkModeToggle = document.getElementById('dark-mode-toggle');
            darkModeToggle.addEventListener('click', () => {
                const isDarkMode = document.body.classList.toggle('dark-mode');
                darkModeToggle.textContent = isDarkMode ? 'Toggle Light Mode' : 'Toggle Dark Mode';
                updateGraphColors(isDarkMode);
            });

            function updateGraphColors(isDarkMode) {
                const backgroundColor = isDarkMode ? 'rgba(50, 50, 50, 1)' : 'rgba(255, 255, 255, 1)';
                const paperBackgroundColor = isDarkMode ? 'rgba(30, 30, 30, 1)' : 'rgba(255, 255, 255, 1)';
                const titleColor = isDarkMode ? '#ffffff' : '#000000';
                const axisColor = isDarkMode ? '#ffffff' : '#000000';

                Plotly.Plots.get('atmosphereTemp').then(function(gd) {
                    Plotly.relayout(gd, {
                        plot_bgcolor: backgroundColor,
                        paper_bgcolor: paperBackgroundColor,
                        titlefont: {color: titleColor},
                        xaxis: {titlefont: {color: axisColor}, tickfont: {color: axisColor}},
                        yaxis: {titlefont: {color: axisColor}, tickfont: {color: axisColor}}
                    });
                });

                Plotly.Plots.get('oceanTemp').then(function(gd) {
                    Plotly.relayout(gd, {
                        plot_bgcolor: backgroundColor,
                        paper_bgcolor: paperBackgroundColor,
                        titlefont: {color: titleColor},
                        xaxis: {titlefont: {color: axisColor}, tickfont: {color: axisColor}},
                        yaxis: {titlefont: {color: axisColor}, tickfont: {color: axisColor}}
                    });
                });

                Plotly.Plots.get('landTemp').then(function(gd) {
                    Plotly.relayout(gd, {
                        plot_bgcolor: backgroundColor,
                        paper_bgcolor: paperBackgroundColor,
                        titlefont: {color: titleColor},
                        xaxis: {titlefont: {color: axisColor}, tickfont: {color: axisColor}},
                        yaxis: {titlefont: {color: axisColor}, tickfont: {color: axisColor}}
                    });
                });

                Plotly.Plots.get('iceVolume').then(function(gd) {
                    Plotly.relayout(gd, {
                        plot_bgcolor: backgroundColor,
                        paper_bgcolor: paperBackgroundColor,
                        titlefont: {color: titleColor},
                        xaxis: {titlefont: {color: axisColor}, tickfont: {color: axisColor}},
                        yaxis: {titlefont: {color: axisColor}, tickfont: {color: axisColor}}
                    });
                });
            }

            // Update date and time
            function updateDateTime() {
                const now = new Date();
                document.getElementById('date-time').textContent = now.toLocaleString();
            }
            setInterval(updateDateTime, 1000);
        </script>
    </div>
</body>
</html>
